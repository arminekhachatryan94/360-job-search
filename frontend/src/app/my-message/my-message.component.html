<!-- <p>
  {{messages | json}}
  {{fromUsers | json}} 
</p> -->
<style>


.flex-container {
  padding: 0;
  margin: 0;
  list-style: none;
  flex-direction: column;
  -ms-box-orient: horizontal;
  display: -webkit-box;
  display: -moz-box;
  display: -ms-flexbox;
  display: -moz-flex;
  display: -webkit-flex;
  display: flex;
}

.flex-item {
  background: #ffffff;
  padding: 10px;
  border: 5px solid #586F7C;
  
  color: #586F7C;
  font-weight: bold;
  font-size: 1em;
  text-align: center;
}

.flex1 { flex: 1 1 20em; }
.flex2 { flex: 2 2 20em; } 


</style>

    
    <div *ngIf="user" class="flex-container">
      <div class="flex-item flex1">
          <div class=" my-primary" style="overflow-y: scroll; height:400px;">  
              <div *ngFor="let fromUser of fromUsers; let i = index">
                <div  class="row border" *ngIf="fromUser.id!=user.id" class="my-primary" (click)="displayMessage(fromUser.id)">
                  <div class="row border">
                    <div class="col-8 align-middle">
                      <p  class="align-middle text-light">{{ email(fromUser.id) }}</p> 
                    </div>
                  <div class="col-4">
                    <i style="float: right" class="fas fa-user fa-6x my-light"></i>
                  </div>
                  </div>
                </div>
              </div>
            </div>
      </div>
      <div class="flex-item flex2">

          <div id="messageDIV"  style="overflow-y: scroll; height:400px;">
              
              <div *ngFor="let message of currentMessages; let i = index" >
                
                <div *ngIf="message.fromUser==myId()">
                    <span > {{ date(message.sentAtDate)   }} </span>
                    <div class="alert alert-primary"> {{message.message}} </div>
                </div>
                <div *ngIf="message.toUser==myId()">
                    <span >{{ date(message.sentAtDate) }}  </span>
                    <div class="alert alert-success"> {{message.message}} </div>
                </div>
                
              </div>

             
            </div>
            {{ updateScrollModified() }}

            <div >

                {{ messageForm.controls.value | json }}
        
                  <div >
                      <form [formGroup]="messageForm"   (ngSubmit)="onSubmit(submitBtn)" (click)="displayMessage(toUserId)">
                          <textarea formControlName="message" class="form-control rounded-0" rows=7 id="message"  required>
                          </textarea>
                        <button style="width: 100%" #submitBtn type="submit" class="my-btn-primary btn-lg">Send Message</button>
                      </form>
                    </div>
                  
                  
                  </div>
        
        
        
        
              </div>
         
          


      </div>
     





<!-- {{ diagnostic }}
{{currentMessages | json}}
 -->


